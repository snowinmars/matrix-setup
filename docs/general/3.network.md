[English](3.network.md) | [Русский](3.network.ru.md)

Prerequirements:

* [ready to run linux](1.linux.md)
    * [maybe on secured partition](2.partitions.md)

# Network

## Ports

    If the port is open, but noone listens on it, the port looks like a closed one.

You must be able to open some ports later on. Learn how to do that using port 51820 as an example.

1. In `ufw`
    1. `sudo ufw allow 51820/tcp`
    1. `sudo ufw allow 51820/udp`
    1. `sudo ufw enable`

Now you'll execute commands in pair in two terminals:

- in one terminal:
    - `nc -lp 51820`
- in other terminal make sure this port has LISTEN state:
    - `sudo iptables -L` - should contain 51820 tcp/udp in and out
    - `sudo netstat -tulpn` - should contain 51820 tcp/udp in and out
    - `sudo ufw status` - should contain 51820 tcp/udp in and out
    - `sudo ufw listening` - should contain tcp listener

- in one terminal:
    - `nc -lup 51820`
- in other terminal:
    - `sudo ufw listening` - should contain udp listener

If it does, you open the port on PC. The next step is to check access from your local network.

- `ifconfig` - find your adapter and pick your local address, f.e. `192.168.0.101`
- open your router settings and forward the port 51820 to 192.168.0.101:51820. Some routers will show your PC ip in the settings too.
- in one terminal: 
  - `nc -lp 51820`
- on other terminal: 
  - `telnet 192.168.0.101 51820` - you should be able to write something in this terminal and press enter - the string should be passed into the first, the listener terminal

To be sure - use another PC **from the same network (same house)** and execute command from the second terminal there.

If it does, you open the port from your PC to your local network.

Internet is a fractal. Continue to repeat these steps, using higher and higher routers (if there are any), finishing with your public ip:

- find your public ip, f.e. 215.201.5.110
- in one terminal: 
  - `nc -lp 51820`
- on other terminal: 
  - `telnet 215.201.5.110 51820`

If it still works, you are fine to go. You can double check that port is open using an online port checker.

If it does not work - fix it. You'll need port forwarding anyway.

# Next

* [nginx setup](4.nginx.md)
